<!DOCTYPE html>
<html lang="zh">
<head>
    <!-- so meta -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="HandheldFriendly" content="True">
    <meta name="google-site-verification" content="GkJ68PCnxM9Ih7Zm9v8p91FOCV7ymNCO2KdGbflLh3E">
    <meta name="360-site-verification" content="dd6547587641bfede036f7c79561e8a0">
    <meta name="shenma-site-verification" content="fd96cf3751972c9b05f8471d2ccadddc_1496951214">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="msvalidate.01" content="1D38B05050A977F6FDEDA481198343F1">
    <meta name="sogou_site_verification" content="MpPsku240L">
    <meta name="description" content="üôÇüôÇüôÇÂÖ≥Ê≥®**ÂæÆ‰ø°ÂÖ¨‰ºóÂè∑Ôºö„ÄêËäãËâøÁöÑÂêéÁ´ØÂ∞èÂ±ã„Äë**ÊúâÁ¶èÂà©Ôºö  RocketMQ / MyCAT / Sharding-JDBC ÊâÄÊúâÊ∫êÁ†ÅÂàÜÊûêÊñáÁ´†ÂàóË°® RocketMQ / MyCAT / Sharding-JDBC ‰∏≠ÊñáÊ≥®ÈáäÊ∫êÁ†Å GitHub Âú∞ÂùÄ ÊÇ®ÂØπ‰∫éÊ∫êÁ†ÅÁöÑÁñëÈóÆÊØèÊù°ÁïôË®ÄÈÉΩÂ∞ÜÂæóÂà∞ËÆ§ÁúüÂõûÂ§ç„ÄÇÁîöËá≥‰∏çÁü•ÈÅìÂ¶Ç‰ΩïËØªÊ∫êÁ†Å‰πüÂèØ‰ª•ËØ∑ÊïôÂô¢„ÄÇ Êñ∞ÁöÑÊ∫êÁ†ÅËß£ÊûêÊñáÁ´†ÂÆûÊó∂Êî∂Âà∞ÈÄöÁü•„ÄÇÊØèÂë®Êõ¥Êñ∞‰∏ÄÁØáÂ∑¶Âè≥„ÄÇ    1. Ê¶Ç">
<meta name="keywords" content="Java,Êû∂ÊûÑ,ÂêéÁ´Ø,ÊúçÂä°Á´Ø,RocketMQ,MyCAT,ÂàÜÂ∏ÉÂºèÊ∂àÊÅØÈòüÂàó,ÂàÜÂ∏ÉÂºèÂ≠òÂÇ®,ÊäÄÊúØÂçöÂÆ¢">
<meta property="og:type" content="article">
<meta property="og:title" content="Sharding-JDBC Ê∫êÁ†ÅÂàÜÊûê ‚Äî‚Äî SQL Ëß£ÊûêÔºà‰∏ÄÔºâ‰πãËØ≠Ê≥ïËß£Êûê">
<meta property="og:url" content="http://www.yunai.me/Sharding-JDBC/sql-parse-1/index.html">
<meta property="og:site_name" content="ËäãËâøVÁöÑÂçöÂÆ¢">
<meta property="og:description" content="üôÇüôÇüôÇÂÖ≥Ê≥®**ÂæÆ‰ø°ÂÖ¨‰ºóÂè∑Ôºö„ÄêËäãËâøÁöÑÂêéÁ´ØÂ∞èÂ±ã„Äë**ÊúâÁ¶èÂà©Ôºö  RocketMQ / MyCAT / Sharding-JDBC ÊâÄÊúâÊ∫êÁ†ÅÂàÜÊûêÊñáÁ´†ÂàóË°® RocketMQ / MyCAT / Sharding-JDBC ‰∏≠ÊñáÊ≥®ÈáäÊ∫êÁ†Å GitHub Âú∞ÂùÄ ÊÇ®ÂØπ‰∫éÊ∫êÁ†ÅÁöÑÁñëÈóÆÊØèÊù°ÁïôË®ÄÈÉΩÂ∞ÜÂæóÂà∞ËÆ§ÁúüÂõûÂ§ç„ÄÇÁîöËá≥‰∏çÁü•ÈÅìÂ¶Ç‰ΩïËØªÊ∫êÁ†Å‰πüÂèØ‰ª•ËØ∑ÊïôÂô¢„ÄÇ Êñ∞ÁöÑÊ∫êÁ†ÅËß£ÊûêÊñáÁ´†ÂÆûÊó∂Êî∂Âà∞ÈÄöÁü•„ÄÇÊØèÂë®Êõ¥Êñ∞‰∏ÄÁØáÂ∑¶Âè≥„ÄÇ    1. Ê¶Ç">
<meta property="og:image" content="http://www.yunai.me/images/common/wechat_mp.jpeg">
<meta property="og:image" content="http://www.yunai.me/images/Sharding-JDBC/2017_07_23/01.png">
<meta property="og:image" content="http://www.yunai.me/images/Sharding-JDBC/2017_07_23/02.png">
<meta property="og:image" content="http://www.yunai.me/images/Sharding-JDBC/2017_07_23/03.png">
<meta property="og:image" content="http://www.yunai.me/images/Sharding-JDBC/2017_07_23/04.png">
<meta property="og:updated_time" content="2017-07-23T08:28:56.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Sharding-JDBC Ê∫êÁ†ÅÂàÜÊûê ‚Äî‚Äî SQL Ëß£ÊûêÔºà‰∏ÄÔºâ‰πãËØ≠Ê≥ïËß£Êûê">
<meta name="twitter:description" content="üôÇüôÇüôÇÂÖ≥Ê≥®**ÂæÆ‰ø°ÂÖ¨‰ºóÂè∑Ôºö„ÄêËäãËâøÁöÑÂêéÁ´ØÂ∞èÂ±ã„Äë**ÊúâÁ¶èÂà©Ôºö  RocketMQ / MyCAT / Sharding-JDBC ÊâÄÊúâÊ∫êÁ†ÅÂàÜÊûêÊñáÁ´†ÂàóË°® RocketMQ / MyCAT / Sharding-JDBC ‰∏≠ÊñáÊ≥®ÈáäÊ∫êÁ†Å GitHub Âú∞ÂùÄ ÊÇ®ÂØπ‰∫éÊ∫êÁ†ÅÁöÑÁñëÈóÆÊØèÊù°ÁïôË®ÄÈÉΩÂ∞ÜÂæóÂà∞ËÆ§ÁúüÂõûÂ§ç„ÄÇÁîöËá≥‰∏çÁü•ÈÅìÂ¶Ç‰ΩïËØªÊ∫êÁ†Å‰πüÂèØ‰ª•ËØ∑ÊïôÂô¢„ÄÇ Êñ∞ÁöÑÊ∫êÁ†ÅËß£ÊûêÊñáÁ´†ÂÆûÊó∂Êî∂Âà∞ÈÄöÁü•„ÄÇÊØèÂë®Êõ¥Êñ∞‰∏ÄÁØáÂ∑¶Âè≥„ÄÇ    1. Ê¶Ç">
<meta name="twitter:image" content="http://www.yunai.me/images/common/wechat_mp.jpeg">
    
    
        
          
              <link rel="shortcut icon" href="/images/favicon.ico">
          
        
        
          
            <link rel="icon" type="image/png" href="/images/favicon-192x192.png" sizes="192x192">
          
        
        
          
            <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png">
          
        
    
    <!-- title -->
    <title>Sharding-JDBC Ê∫êÁ†ÅÂàÜÊûê ‚Äî‚Äî SQL Ëß£ÊûêÔºà‰∏ÄÔºâ‰πãËØ≠Ê≥ïËß£Êûê</title>
    <!-- keywords -->
    
    <meta name="keywords" content="Java,Êû∂ÊûÑ,ÂêéÁ´Ø,ÊúçÂä°Á´Ø,RocketMQ,MyCAT,ÂàÜÂ∏ÉÂºèÊ∂àÊÅØÈòüÂàó,ÂàÜÂ∏ÉÂºèÂ≠òÂÇ®,ÊäÄÊúØÂçöÂÆ¢">
    
    <!-- styles -->
    <link rel="stylesheet" href="/css/style.css">
    <!-- rss -->
    
    


    <script src="https://cdn1.lncld.net/static/js/av-core-mini-0.6.1.js"></script>
    <script>AV.initialize("uxUSudJeAFuAk0PKwFMY7MJW-gzGzoHsz", "NTPUE2VIEE0gyPPGbAaLPtLb");</script>
    <!-- ÁôæÂ∫¶ÁªüËÆ° -->
    <script>
        var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "https://hm.baidu.com/hm.js?ef4ed89f6dc83d01803a2440ae21e666";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();
    </script>
    <!-- ÁôæÂ∫¶Á´ôÈïø-Ë¢´Âä®Êé®ÈÄÅ -->
    <script>
        (function(){
            var bp = document.createElement('script');
            var curProtocol = window.location.protocol.split(':')[0];
            if (curProtocol === 'https') {
                bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
            }
            else {
                bp.src = 'http://push.zhanzhang.baidu.com/push.js';
            }
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(bp, s);
        })();
    </script>

    <!-- 360ÊêúÁ¥¢-Ëá™Âä®Êî∂ÂΩï -->
    <script>
        (function(){
            var src = (document.location.protocol == "http:") ? "http://js.passport.qihucdn.com/11.0.1.js?f05b61dd54bbc38386611a5238672938":"https://jspassport.ssl.qhimg.com/11.0.1.js?f05b61dd54bbc38386611a5238672938";
            document.write('<script src="' + src + '" id="sozz"><\/script>');
        })();
    </script>
</head>

<body>
    
      <div id="header-post">
  <a id="menu-icon" href="#" class="active"><i class="fa fa-bars fa-lg"></i></a>
  <a id="menu-icon-tablet" href="#" class="active"><i class="fa fa-bars fa-lg"></i></a>
  <a id="top-icon-tablet" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');" style="display:visible;">
    <i class="fa fa-chevron-up fa-lg"></i>
  </a>
  <span id="menu" style="visibility: visible;">
    <span id="nav">
      <ul>
        
          <li><a href="/">Home</a></li>
        
          <li><a href="/archives/">Writing</a></li>
        
          <li><a href="http://github.com/YunaiV">GitHub</a></li>
        
      </ul>
    </span>
    <br>
    <span id="actions">
      <ul>
        
        
        <li><a class="icon" href="/MyCAT/connect-mongodb/"><i class="fa fa-chevron-right" aria-hidden="true" onmouseover="$(" #i-next").toggle();"="" onmouseout="$("></i></a></li>
        
        <li><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up" aria-hidden="true" onmouseover="$(" #i-top").toggle();"="" onmouseout="$("></i></a></li>
        <li><a class="icon" href="#"><i class="fa fa-share-alt" aria-hidden="true" onmouseover="$(" #i-share").toggle();"="" onmouseout="$(" onclick="$(" #share").toggle();return="" false;"=""></i></a></li>
      </ul>
      <span id="i-prev" class="info" style="display:none;">Previous post</span>
      <span id="i-next" class="info" style="display:none;">Next post</span>
      <span id="i-top" class="info" style="display:none;">Back to top</span>
      <span id="i-share" class="info" style="display:none;">Share post</span>
    </span>
    <br>
    <div id="share" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://www.yunai.me/Sharding-JDBC/sql-parse-1/" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-facebook " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://www.yunai.me/Sharding-JDBC/sql-parse-1/&text=Sharding-JDBC Ê∫êÁ†ÅÂàÜÊûê ‚Äî‚Äî SQL Ëß£ÊûêÔºà‰∏ÄÔºâ‰πãËØ≠Ê≥ïËß£Êûê" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-twitter " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://www.yunai.me/Sharding-JDBC/sql-parse-1/&title=Sharding-JDBC Ê∫êÁ†ÅÂàÜÊûê ‚Äî‚Äî SQL Ëß£ÊûêÔºà‰∏ÄÔºâ‰πãËØ≠Ê≥ïËß£Êûê" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-linkedin " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://www.yunai.me/Sharding-JDBC/sql-parse-1/&is_video=false&description=Sharding-JDBC Ê∫êÁ†ÅÂàÜÊûê ‚Äî‚Äî SQL Ëß£ÊûêÔºà‰∏ÄÔºâ‰πãËØ≠Ê≥ïËß£Êûê" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-pinterest " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Sharding-JDBC Ê∫êÁ†ÅÂàÜÊûê ‚Äî‚Äî SQL Ëß£ÊûêÔºà‰∏ÄÔºâ‰πãËØ≠Ê≥ïËß£Êûê&body=Check out this article: http://www.yunai.me/Sharding-JDBC/sql-parse-1/"><i class="fa fa-envelope " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://www.yunai.me/Sharding-JDBC/sql-parse-1/&title=Sharding-JDBC Ê∫êÁ†ÅÂàÜÊûê ‚Äî‚Äî SQL Ëß£ÊûêÔºà‰∏ÄÔºâ‰πãËØ≠Ê≥ïËß£Êûê" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-get-pocket " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://www.yunai.me/Sharding-JDBC/sql-parse-1/&title=Sharding-JDBC Ê∫êÁ†ÅÂàÜÊûê ‚Äî‚Äî SQL Ëß£ÊûêÔºà‰∏ÄÔºâ‰πãËØ≠Ê≥ïËß£Êûê" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-reddit " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://www.yunai.me/Sharding-JDBC/sql-parse-1/&title=Sharding-JDBC Ê∫êÁ†ÅÂàÜÊûê ‚Äî‚Äî SQL Ëß£ÊûêÔºà‰∏ÄÔºâ‰πãËØ≠Ê≥ïËß£Êûê" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-stumbleupon " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://www.yunai.me/Sharding-JDBC/sql-parse-1/&title=Sharding-JDBC Ê∫êÁ†ÅÂàÜÊûê ‚Äî‚Äî SQL Ëß£ÊûêÔºà‰∏ÄÔºâ‰πãËØ≠Ê≥ïËß£Êûê" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-digg " aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://www.yunai.me/Sharding-JDBC/sql-parse-1/&name=Sharding-JDBC Ê∫êÁ†ÅÂàÜÊûê ‚Äî‚Äî SQL Ëß£ÊûêÔºà‰∏ÄÔºâ‰πãËØ≠Ê≥ïËß£Êûê&description=" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-tumblr " aria-hidden="true"></i></a></li>
</ul>

    </div>
    <div id="toc">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">1.</span> <span class="toc-text">1. Ê¶ÇËø∞</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">2.</span> <span class="toc-text">2. Lexer ËØçÊ≥ïËß£ÊûêÂô®</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">3.</span> <span class="toc-text">3. Token ËØçÊ≥ïÊ†áËÆ∞</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#undefined"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 DefaultKeyword ËØçÊ≥ïÂÖ≥ÈîÆËØç</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#undefined"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 Literals ËØçÊ≥ïÂ≠óÈù¢ÈáèÊ†áËÆ∞</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">3.2.1.</span> <span class="toc-text">3.2.1 Literals.IDENTIFIER ËØçÊ≥ïÂÖ≥ÈîÆËØç</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">3.2.2.</span> <span class="toc-text">3.2.2 Literals.VARIABLE ÂèòÈáè</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">3.2.3.</span> <span class="toc-text">3.2.3 Literals.CHARS Â≠óÁ¨¶‰∏≤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">3.2.4.</span> <span class="toc-text">3.2.4 Literals.HEX ÂçÅÂÖ≠ËøõÂà∂</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">3.2.5.</span> <span class="toc-text">3.2.5 Literals.INT Êï¥Êï∞</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">3.2.6.</span> <span class="toc-text">3.2.6 Literals.FLOAT ÊµÆÁÇπÊï∞</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#undefined"><span class="toc-number">3.3.</span> <span class="toc-text">3.3 Symbol ËØçÊ≥ïÁ¨¶Âè∑Ê†áËÆ∞</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#undefined"><span class="toc-number">3.4.</span> <span class="toc-text">3.4 Assist ËØçÊ≥ïËæÖÂä©Ê†áËÆ∞</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">4.</span> <span class="toc-text">4. ÂΩ©Ëõã</span></a></li></ol>
    </div>
  </span>
</div>

    
    <div class="content index width mx-auto px2 my4">
        
        <article class="post" itemscope="" itemtype="http://schema.org/BlogPosting">
  <header>
    
    <h1 class="posttitle" itemprop="name headline">
        Sharding-JDBC Ê∫êÁ†ÅÂàÜÊûê ‚Äî‚Äî SQL Ëß£ÊûêÔºà‰∏ÄÔºâ‰πãËØ≠Ê≥ïËß£Êûê
    </h1>



    <div class="meta">
      <span class="author" itemprop="author" itemscope="" itemtype="http://schema.org/Person">
        <span itemprop="name">ËäãËâøVÁöÑÂçöÂÆ¢</span>
      </span>
      
    <div class="postdate">
        <time datetime="2017-07-22T16:00:00.000Z" itemprop="datePublished">2017-07-23</time>
    </div>


      

    </div>
  </header>
  

  <div class="content" itemprop="articleBody">
    <p><img src="http://www.yunai.me/images/common/wechat_mp.jpeg" alt=""></p>
<blockquote>
<p>üôÇüôÇüôÇÂÖ≥Ê≥®**ÂæÆ‰ø°ÂÖ¨‰ºóÂè∑Ôºö„ÄêËäãËâøÁöÑÂêéÁ´ØÂ∞èÂ±ã„Äë**ÊúâÁ¶èÂà©Ôºö</p>
<ol>
<li>RocketMQ / MyCAT / Sharding-JDBC <strong>ÊâÄÊúâ</strong>Ê∫êÁ†ÅÂàÜÊûêÊñáÁ´†ÂàóË°®</li>
<li>RocketMQ / MyCAT / Sharding-JDBC <strong>‰∏≠ÊñáÊ≥®ÈáäÊ∫êÁ†Å GitHub Âú∞ÂùÄ</strong></li>
<li>ÊÇ®ÂØπ‰∫éÊ∫êÁ†ÅÁöÑÁñëÈóÆÊØèÊù°ÁïôË®Ä<strong>ÈÉΩ</strong>Â∞ÜÂæóÂà∞<strong>ËÆ§Áúü</strong>ÂõûÂ§ç„ÄÇ<strong>ÁîöËá≥‰∏çÁü•ÈÅìÂ¶Ç‰ΩïËØªÊ∫êÁ†Å‰πüÂèØ‰ª•ËØ∑ÊïôÂô¢</strong>„ÄÇ</li>
<li><strong>Êñ∞ÁöÑ</strong>Ê∫êÁ†ÅËß£ÊûêÊñáÁ´†<strong>ÂÆûÊó∂</strong>Êî∂Âà∞ÈÄöÁü•„ÄÇ<strong>ÊØèÂë®Êõ¥Êñ∞‰∏ÄÁØáÂ∑¶Âè≥</strong>„ÄÇ</li>
</ol>
</blockquote>
<hr>
<h1>1. Ê¶ÇËø∞</h1>
<p>SQL Ëß£ÊûêÔºåÊï∞ÊçÆÂ∫ì‰∏≠Èó¥‰ª∂ÂøÖÂ§áÁöÑÂäüËÉΩÂíåÊµÅÁ®ã„ÄÇSharding-JDBC Âú® <code>1.5.0</code> Ê≠£ÂºèÂèëÂ∏ÉÊó∂ÔºåÂ∞Ü SQL Ëß£ÊûêÂºïÊìé‰ªé Druid ÊõøÊç¢Êàê‰∫ÜËá™Á†îÁöÑ„ÄÇ<strong>Êñ∞ÂºïÊìé‰ªÖËß£ÊûêÂàÜÁâá‰∏ä‰∏ãÊñáÔºåÂØπ‰∫é SQL ÈááÁî®&quot;ÂçäÁêÜËß£&quot;ÁêÜÂøµÔºåËøõ‰∏ÄÊ≠•ÊèêÂçáÊÄßËÉΩÂíåÂÖºÂÆπÊÄßÔºåÂêåÊó∂Èôç‰Ωé‰∫Ü‰ª£Á†ÅÂ§çÊùÇÂ∫¶</strong>Ôºà‰∏çÁêÜËß£Ê≤°ÂÖ≥Á≥ªÔºåÊàë‰ª¨ÂêéÁª≠‰ºöÊõ¥Êñ∞ÊñáÁ´†Ëß£ÈáäËØ•‰ºòÁÇπÔºâ„ÄÇ ÂõΩÂÜÖÂè¶‰∏ÄÊ¨æÊï∞ÊçÆÂ∫ì‰∏≠Èó¥‰ª∂ MyCAT SQL Ëß£ÊûêÂºïÊìé‰πüÊòØ DruidÔºåÁõÆÂâç‰πüÂú®Â±û‰∫éËá™Â∑±ÁöÑ SQL Ëß£ÊûêÂºïÊìé„ÄÇ</p>
<p>ÂèØËÉΩÊúâÂêåÂ≠¶ÁúãÂà∞<strong>SQL Ëß£Êûê</strong>‰ºöË¢´ÂêìÂà∞ÔºåËØ∑Ê∑°ÂÆöÔºåËÄêÂøÉÂæÄ‰∏ãÁúã„ÄÇ„ÄäSQL Ëß£Êûê„ÄãÂÜÖÂÆπÊàë‰ª¨‰ºöÂàÜÊàê 5 ÁØáÁõ∏ÂØπÁÆÄÁü≠ÁöÑÊñáÁ´†ÔºåËÆ©Â§ßÂÆ∂ËÉΩÂ§üÁõ∏ÂØπËΩªÊùæÊÑâÂø´ÁöÑÂéªÁêÜËß£Ôºö</p>
<ol>
<li>ËØçÊ≥ïËß£Êûê</li>
<li>ÊèíÂÖ• SQL Ëß£Êûê</li>
<li>Êü•ËØ¢ SQL Ëß£Êûê</li>
<li>Êõ¥Êñ∞ SQL Ëß£Êûê</li>
<li>Âà†Èô§ SQL Ëß£Êûê</li>
</ol>
<hr>
<p><img src="../../../images/Sharding-JDBC/2017_07_23/01.png" alt=""></p>
<p><strong>SQL Ëß£ÊûêÂºïÊìé</strong>Âú® <code>parsing</code> ÂåÖ‰∏ãÔºåÂ¶Ç‰∏äÂõæÊâÄËßÅÂåÖÂê´‰∏§Â§ßÁªÑ‰ª∂Ôºö</p>
<ol>
<li>LexerÔºö<strong>ËØçÊ≥ï</strong>Ëß£ÊûêÂô®„ÄÇ</li>
<li>ParserÔºö<strong>SQL</strong>Ëß£ÊûêÂô®„ÄÇ</li>
</ol>
<p>‰∏§ËÄÖÈÉΩÊòØËß£ÊûêÂô®ÔºåÂå∫Âà´Âú®‰∫é Lexer Âè™ÂÅöËØçÊ≥ïÁöÑËß£ÊûêÔºå‰∏çÂÖ≥Ê≥®‰∏ä‰∏ãÊñáÔºåÂ∞ÜÂ≠óÁ¨¶‰∏≤ÊãÜËß£Êàê N ‰∏™ËØçÊ≥ï„ÄÇËÄå Parser Âú® Lexer ÁöÑÂü∫Á°Ä‰∏äÔºåËøòÈúÄË¶ÅÁêÜËß£ SQL „ÄÇÊâì‰∏™ÊØîÊñπÔºö</p>
<p><figure class="highlight sql"><table><tr><td class="code"><pre><div class="line"><span class="keyword">SELECT</span> * <span class="keyword">FROM</span> t_user  </div><div class="line">Lexer Ôºö[<span class="keyword">SELECT</span>] [ * ] [<span class="keyword">FROM</span>] [t_user]  </div><div class="line">Parser ÔºöËøôÊòØ‰∏ÄÊù°Êü•ËØ¢Ë°®‰∏∫ [t_user] ÔºåÂπ∂‰∏îËøîÂõû [ * ] ÊâÄÊúâÂ≠óÊÆµÁöÑ<span class="keyword">SQL</span>„ÄÇ</div></pre></td></tr></table></figure></p>
<p>üôÇ‰∏çÂÆåÂÖ®ÊáÇÔºüÊ≤°ÂÖ≥Á≥ªÔºåÊú¨ÊñáÁöÑ‰∏ªËßíÊòØ LexerÔºåÊàë‰ª¨ÈÄöËøáÊ∫êÁ†Å‰∏ÄÁÇπ‰∏ÄÁÇπÁêÜËß£„ÄÇ‰∏ÄÂÖ± 1400 Ë°åÂ∑¶Âè≥‰ª£Á†ÅÂ∑¶Âè≥ÔºåËøòÂåÖÂê´Ê≥®ÈáäÁ≠âÁ≠âÔºåÂÆûÈôÖÊõ¥Â∞ëÂô¢„ÄÇ</p>
<h1>2. Lexer ËØçÊ≥ïËß£ÊûêÂô®</h1>
<p><strong>Lexer ÂéüÁêÜ</strong>Ôºö<strong>È°∫Â∫èÈ°∫Â∫èÈ°∫Â∫è</strong> Ëß£Êûê SQLÔºåÂ∞ÜÂ≠óÁ¨¶‰∏≤ÊãÜËß£Êàê N ‰∏™ËØçÊ≥ï„ÄÇ</p>
<p>Ê†∏ÂøÉ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="comment">// Lexer.java</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Lexer</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * ËæìÂá∫Â≠óÁ¨¶‰∏≤</div><div class="line">     * ÊØîÂ¶ÇÔºöSQL</div><div class="line">     */</div><div class="line">    <span class="meta">@Getter</span></div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String input;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * ËØçÊ≥ïÊ†áËÆ∞Â≠óÂÖ∏</div><div class="line">     */</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Dictionary dictionary;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Ëß£ÊûêÂà∞ SQL ÁöÑ offset</div><div class="line">     */</div><div class="line">    <span class="keyword">private</span> <span class="keyword">int</span> offset;</div><div class="line">    <span class="comment">/**</span></div><div class="line">     * ÂΩìÂâç ËØçÊ≥ïÊ†áËÆ∞</div><div class="line">     */</div><div class="line">    <span class="meta">@Getter</span></div><div class="line">    <span class="keyword">private</span> Token currentToken;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * ÂàÜÊûê‰∏ã‰∏Ä‰∏™ËØçÊ≥ïÊ†áËÆ∞.</div><div class="line">     *</div><div class="line">     * <span class="doctag">@see</span> #currentToken</div><div class="line">     * <span class="doctag">@see</span> #offset</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">final</span> <span class="keyword">void</span> <span class="title">nextToken</span><span class="params">()</span> </span>&#123;</div><div class="line">        skipIgnoredToken();</div><div class="line">        <span class="keyword">if</span> (isVariableBegin()) &#123; <span class="comment">// ÂèòÈáè</span></div><div class="line">            currentToken = <span class="keyword">new</span> Tokenizer(input, dictionary, offset).scanVariable();</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isNCharBegin()) &#123; <span class="comment">// N\</span></div><div class="line">            currentToken = <span class="keyword">new</span> Tokenizer(input, dictionary, ++offset).scanChars();</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isIdentifierBegin()) &#123; <span class="comment">// Keyword + Literals.IDENTIFIER</span></div><div class="line">            currentToken = <span class="keyword">new</span> Tokenizer(input, dictionary, offset).scanIdentifier();</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isHexDecimalBegin()) &#123; <span class="comment">// ÂçÅÂÖ≠ËøõÂà∂</span></div><div class="line">            currentToken = <span class="keyword">new</span> Tokenizer(input, dictionary, offset).scanHexDecimal();</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isNumberBegin()) &#123; <span class="comment">// Êï∞Â≠óÔºàÊï¥Êï∞+ÊµÆÁÇπÊï∞Ôºâ</span></div><div class="line">            currentToken = <span class="keyword">new</span> Tokenizer(input, dictionary, offset).scanNumber();</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isSymbolBegin()) &#123; <span class="comment">// Á¨¶Âè∑</span></div><div class="line">            currentToken = <span class="keyword">new</span> Tokenizer(input, dictionary, offset).scanSymbol();</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isCharsBegin()) &#123; <span class="comment">// Â≠óÁ¨¶‰∏≤Ôºå‰æãÂ¶ÇÔºö"abc"</span></div><div class="line">            currentToken = <span class="keyword">new</span> Tokenizer(input, dictionary, offset).scanChars();</div><div class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (isEnd()) &#123; <span class="comment">// ÁªìÊùü</span></div><div class="line">            currentToken = <span class="keyword">new</span> Token(Assist.END, <span class="string">""</span>, offset);</div><div class="line">        &#125; <span class="keyword">else</span> &#123; <span class="comment">// ÂàÜÊûêÈîôËØØÔºåÊó†Á¨¶ÂêàÊù°‰ª∂ÁöÑËØçÊ≥ïÊ†áËÆ∞</span></div><div class="line">            currentToken = <span class="keyword">new</span> Token(Assist.ERROR, <span class="string">""</span>, offset);</div><div class="line">        &#125;</div><div class="line">        offset = currentToken.getEndPosition();</div><div class="line">        <span class="comment">// System.out.println("| " + currentToken.getLiterals() + " | " + currentToken.getType() + " | " + currentToken.getEndPosition() + " |");</span></div><div class="line">    &#125;</div><div class="line">    </div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Ë∑≥ËøáÂøΩÁï•ÁöÑËØçÊ≥ïÊ†áËÆ∞</div><div class="line">     * 1. Á©∫Ê†º</div><div class="line">     * 2. SQL Hint</div><div class="line">     * 3. SQL Ê≥®Èáä</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">skipIgnoredToken</span><span class="params">()</span> </span>&#123;</div><div class="line">        <span class="comment">// Á©∫Ê†º</span></div><div class="line">        offset = <span class="keyword">new</span> Tokenizer(input, dictionary, offset).skipWhitespace();</div><div class="line">        <span class="comment">// SQL Hint</span></div><div class="line">        <span class="keyword">while</span> (isHintBegin()) &#123;</div><div class="line">            offset = <span class="keyword">new</span> Tokenizer(input, dictionary, offset).skipHint();</div><div class="line">            offset = <span class="keyword">new</span> Tokenizer(input, dictionary, offset).skipWhitespace();</div><div class="line">        &#125;</div><div class="line">        <span class="comment">// SQL Ê≥®Èáä</span></div><div class="line">        <span class="keyword">while</span> (isCommentBegin()) &#123;</div><div class="line">            offset = <span class="keyword">new</span> Tokenizer(input, dictionary, offset).skipComment();</div><div class="line">            offset = <span class="keyword">new</span> Tokenizer(input, dictionary, offset).skipWhitespace();</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ÈÄöËøá <code>#nextToken()</code> ÊñπÊ≥ïÔºå‰∏çÊñ≠Ëß£ÊûêÂá∫ Token(<em>ËØçÊ≥ïÊ†áËÆ∞</em>)„ÄÇÊàë‰ª¨Êù•ÊâßË°å‰∏ÄÊ¨°ÔºåÁúãÁúã SQL ‰ºöË¢´ÊãÜËß£ÊàêÂì™‰∫õ Token„ÄÇ</p>
<p><figure class="highlight sql"><table><tr><td class="code"><pre><div class="line">SQL Ôºö<span class="keyword">SELECT</span> i.* <span class="keyword">FROM</span> t_order o <span class="keyword">JOIN</span> t_order_item i <span class="keyword">ON</span> o.order_id=i.order_id <span class="keyword">WHERE</span> o.user_id=? <span class="keyword">AND</span> o.order_id=?</div></pre></td></tr></table></figure></p>
<table>
<thead>
<tr>
<th>literals</th>
<th>TokenTypeÁ±ª</th>
<th>TokenTypeÂÄº</th>
<th>endPosition</th>
</tr>
</thead>
<tbody>
<tr>
<td>SELECT</td>
<td>DefaultKeyword</td>
<td>SELECT</td>
<td>6</td>
</tr>
<tr>
<td>i</td>
<td>Literals</td>
<td>IDENTIFIER</td>
<td>8</td>
</tr>
<tr>
<td>.</td>
<td>Symbol</td>
<td>DOT</td>
<td>9</td>
</tr>
<tr>
<td>*</td>
<td>Symbol</td>
<td>STAR</td>
<td>10</td>
</tr>
<tr>
<td>FROM</td>
<td>DefaultKeyword</td>
<td>FROM</td>
<td>15</td>
</tr>
<tr>
<td>t_order</td>
<td>Literals</td>
<td>IDENTIFIER</td>
<td>23</td>
</tr>
<tr>
<td>o</td>
<td>Literals</td>
<td>IDENTIFIER</td>
<td>25</td>
</tr>
<tr>
<td>JOIN</td>
<td>DefaultKeyword</td>
<td>JOIN</td>
<td>30</td>
</tr>
<tr>
<td>t_order_item</td>
<td>Literals</td>
<td>IDENTIFIER</td>
<td>43</td>
</tr>
<tr>
<td>i</td>
<td>Literals</td>
<td>IDENTIFIER</td>
<td>45</td>
</tr>
<tr>
<td>ON</td>
<td>DefaultKeyword</td>
<td>ON</td>
<td>48</td>
</tr>
<tr>
<td>o</td>
<td>Literals</td>
<td>IDENTIFIER</td>
<td>50</td>
</tr>
<tr>
<td>.</td>
<td>Symbol</td>
<td>DOT</td>
<td>51</td>
</tr>
<tr>
<td>order_id</td>
<td>Literals</td>
<td>IDENTIFIER</td>
<td>59</td>
</tr>
<tr>
<td>=</td>
<td>Symbol</td>
<td>EQ</td>
<td>60</td>
</tr>
<tr>
<td>i</td>
<td>Literals</td>
<td>IDENTIFIER</td>
<td>61</td>
</tr>
<tr>
<td>.</td>
<td>Symbol</td>
<td>DOT</td>
<td>62</td>
</tr>
<tr>
<td>order_id</td>
<td>Literals</td>
<td>IDENTIFIER</td>
<td>70</td>
</tr>
<tr>
<td>WHERE</td>
<td>DefaultKeyword</td>
<td>WHERE</td>
<td>76</td>
</tr>
<tr>
<td>o</td>
<td>Literals</td>
<td>IDENTIFIER</td>
<td>78</td>
</tr>
<tr>
<td>.</td>
<td>Symbol</td>
<td>DOT</td>
<td>79</td>
</tr>
<tr>
<td>user_id</td>
<td>Literals</td>
<td>IDENTIFIER</td>
<td>86</td>
</tr>
<tr>
<td>=</td>
<td>Symbol</td>
<td>EQ</td>
<td>87</td>
</tr>
<tr>
<td>?</td>
<td>Symbol</td>
<td>QUESTION</td>
<td>88</td>
</tr>
<tr>
<td>AND</td>
<td>DefaultKeyword</td>
<td>AND</td>
<td>92</td>
</tr>
<tr>
<td>o</td>
<td>Literals</td>
<td>IDENTIFIER</td>
<td>94</td>
</tr>
<tr>
<td>.</td>
<td>Symbol</td>
<td>DOT</td>
<td>95</td>
</tr>
<tr>
<td>order_id</td>
<td>Literals</td>
<td>IDENTIFIER</td>
<td>103</td>
</tr>
<tr>
<td>=</td>
<td>Symbol</td>
<td>EQ</td>
<td>104</td>
</tr>
<tr>
<td>?</td>
<td>Symbol</td>
<td>QUESTION</td>
<td>105</td>
</tr>
<tr>
<td></td>
<td>Assist</td>
<td>END</td>
<td>105</td>
</tr>
</tbody>
</table>
<p>ÁúºÂ∞ñÁöÑÂêåÂ≠¶ÂèØËÉΩÁúãÂà∞‰∫Ü Tokenizer„ÄÇÂØπÁöÑÔºåÂÆÉÊòØ Lexer ÁöÑÂ•ΩÂü∫‰Ω¨ÔºåË¥üË¥£<strong>ÂàÜËØç</strong>„ÄÇ</p>
<p><em>Êàë‰ª¨Êù•ÊÄªÁªì‰∏ãÔºå<code>Lexer#nextToken()</code> ÊñπÊ≥ïÈáåÔºå‰ΩøÁî® <code>#skipIgnoredToken()</code> ÊñπÊ≥ïË∑≥ËøáÂøΩÁï•ÁöÑ TokenÔºåÈÄöËøá <code>#isXXXX()</code> ÊñπÊ≥ïÂà§Êñ≠Â•Ω‰∏ã‰∏Ä‰∏™ Token ÁöÑÁ±ªÂûãÂêéÔºå<strong>‰∫§Áªô Tokenizer ËøõË°åÂàÜËØçËøîÂõû Token</strong>„ÄÇ‚ÄºÔ∏èÊ≠§Â§ÑÂèØ‰ª•ËÄÉËôëÂÅö‰∏™‰ºòÂåñÔºå‰∏çÈúÄË¶ÅÊØèÊ¨°ÈÉΩ <code>new Tokenizer(...)</code> Âá∫Êù•Ôºå‰∏Ä‰∏™ Lexer Êê≠ÈÖç‰∏Ä‰∏™ Tokenizer„ÄÇ</em></p>
<hr>
<p>Áî±‰∫é‰∏çÂêåÊï∞ÊçÆÂ∫ìÈÅµÂÆà SQL ËßÑËåÉÁï•Êúâ‰∏çÂêåÔºåÊâÄ‰ª•‰∏çÂêåÁöÑÊï∞ÊçÆÂ∫ìÂØπÂ∫î‰∏çÂêåÁöÑ Lexer„ÄÇ</p>
<p><img src="../../../images/Sharding-JDBC/2017_07_23/02.png" alt=""></p>
<p>Â≠ê Lexer ÈÄöËøáÈáçÂÜôÊñπÊ≥ïÂÆûÁé∞Ëá™Â∑±Áã¨ÊúâÁöÑ SQL ËØ≠Ê≥ï„ÄÇ</p>
<h1>3. Token ËØçÊ≥ïÊ†áËÆ∞</h1>
<p>‰∏äÊñáÊàë‰ª¨Â∑≤ÁªèÁúãËøá Token ÁöÑ‰æãÂ≠êÔºå‰∏ÄÂÖ±Êúâ 3 ‰∏™Â±ûÊÄßÔºö</p>
<ul>
<li>TokenType type ÔºöËØçÊ≥ïÊ†áËÆ∞Á±ªÂûã</li>
<li>String literals ÔºöËØçÊ≥ïÂ≠óÈù¢ÈáèÊ†áËÆ∞</li>
<li>endPosition Ôºö<code>literals</code> Âú® SQL ÈáåÁöÑÁªìÊùü‰ΩçÁΩÆ</li>
</ul>
<p>TokenType ËØçÊ≥ïÊ†áËÆ∞Á±ªÂûãÔºå‰∏ÄÂÖ±ÂàÜÊàê 4 ‰∏™Â§ßÁ±ªÔºö</p>
<ul>
<li>DefaultKeyword ÔºöËØçÊ≥ïÂÖ≥ÈîÆËØç</li>
<li>Literals ÔºöËØçÊ≥ïÂ≠óÈù¢ÈáèÊ†áËÆ∞</li>
<li>Symbol ÔºöËØçÊ≥ïÁ¨¶Âè∑Ê†áËÆ∞</li>
<li>Assist ÔºöËØçÊ≥ïËæÖÂä©Ê†áËÆ∞</li>
</ul>
<p><img src="../../../images/Sharding-JDBC/2017_07_23/03.png" alt=""></p>
<h2>3.1 DefaultKeyword ËØçÊ≥ïÂÖ≥ÈîÆËØç</h2>
<p><img src="../../../images/Sharding-JDBC/2017_07_23/04.png" alt=""></p>
<p><strong>‰∏çÂêåÊï∞ÊçÆÂ∫ìÊúâËá™Â∑±Áã¨ÊúâÁöÑ_ËØçÊ≥ïÂÖ≥ÈîÆËØç_Ôºå‰æãÂ¶Ç MySQL ÁÜüÁü•ÁöÑÂàÜÈ°µ Limit„ÄÇ</strong></p>
<p>Êàë‰ª¨‰ª• MySQL ‰∏æ‰∏™‰æãÂ≠êÔºåÂΩìÂàõÂª∫ MySQLLexer Êó∂Ôºå‰ºöÂä†ËΩΩ DefaultKeyword Âíå MySQLKeywordÔºà <em>OracleLexer„ÄÅPostgreSQLLexer„ÄÅSQLServerLexer Âêå MySQLLexer</em> Ôºâ„ÄÇÊ†∏ÂøÉ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="comment">// MySQLLexer.java</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">MySQLLexer</span> <span class="keyword">extends</span> <span class="title">Lexer</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Â≠óÂÖ∏</div><div class="line">     */</div><div class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Dictionary dictionary = <span class="keyword">new</span> Dictionary(MySQLKeyword.values());</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">MySQLLexer</span><span class="params">(<span class="keyword">final</span> String input)</span> </span>&#123;</div><div class="line">        <span class="keyword">super</span>(input, dictionary);</div><div class="line">    &#125;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Dictionary.java</span></div><div class="line"><span class="keyword">public</span> <span class="keyword">final</span> <span class="class"><span class="keyword">class</span> <span class="title">Dictionary</span> </span>&#123;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * ËØçÊ≥ïÂÖ≥ÈîÆËØçMap</div><div class="line">     */</div><div class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Map&lt;String, Keyword&gt; tokens = <span class="keyword">new</span> HashMap&lt;&gt;(<span class="number">1024</span>);</div><div class="line">    </div><div class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Dictionary</span><span class="params">(<span class="keyword">final</span> Keyword... dialectKeywords)</span> </span>&#123;</div><div class="line">        fill(dialectKeywords);</div><div class="line">    &#125;</div><div class="line"></div><div class="line">    <span class="comment">/**</span></div><div class="line">     * Ë£Ö‰∏äÈªòËÆ§ËØçÊ≥ïÂÖ≥ÈîÆËØç + ÊñπË®ÄËØçÊ≥ïÂÖ≥ÈîÆËØç</div><div class="line">     * ‰∏çÂêåÁöÑÊï∞ÊçÆÂ∫ìÊúâÁõ∏ÂêåÁöÑÈªòËÆ§ËØçÊ≥ïÂÖ≥ÈîÆËØçÔºåÊúâÊúâ‰∏çÂêåÁöÑÊñπË®ÄÂÖ≥ÈîÆËØç</div><div class="line">     *</div><div class="line">     * <span class="doctag">@param</span> dialectKeywords ÊñπË®ÄËØçÊ≥ïÂÖ≥ÈîÆËØç</div><div class="line">     */</div><div class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">fill</span><span class="params">(<span class="keyword">final</span> Keyword... dialectKeywords)</span> </span>&#123;</div><div class="line">        <span class="keyword">for</span> (DefaultKeyword each : DefaultKeyword.values()) &#123;</div><div class="line">            tokens.put(each.name(), each);</div><div class="line">        &#125;</div><div class="line">        <span class="keyword">for</span> (Keyword each : dialectKeywords) &#123;</div><div class="line">            tokens.put(each.toString(), each);</div><div class="line">        &#125;</div><div class="line">    &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>Keyword ‰∏é Literals.IDENTIFIER ÊòØ‰∏ÄËµ∑Ëß£ÊûêÁöÑÔºåÊàë‰ª¨ÊîæÂú® Literals.IDENTIFIER Â§Ñ‰∏ÄËµ∑ÂàÜÊûê„ÄÇ</p>
<h2>3.2 Literals ËØçÊ≥ïÂ≠óÈù¢ÈáèÊ†áËÆ∞</h2>
<p>Literals ËØçÊ≥ïÂ≠óÈù¢ÈáèÊ†áËÆ∞Ôºå‰∏ÄÂÖ±ÂàÜÊàê 6 ÁßçÔºö</p>
<ul>
<li>IDENTIFIER ÔºöËØçÊ≥ïÂÖ≥ÈîÆËØç</li>
<li>VARIABLE ÔºöÂèòÈáè</li>
<li>CHARS ÔºöÂ≠óÁ¨¶‰∏≤</li>
<li>HEX ÔºöÂçÅÂÖ≠ËøõÂà∂</li>
<li>INT ÔºöÊï¥Êï∞</li>
<li>FLOAT ÔºöÊµÆÁÇπÊï∞</li>
</ul>
<h3>3.2.1 Literals.IDENTIFIER ËØçÊ≥ïÂÖ≥ÈîÆËØç</h3>
<p>ËØçÊ≥ïÂÖ≥ÈîÆËØç„ÄÇ‰æãÂ¶ÇÔºöË°®ÂêçÔºåÊü•ËØ¢Â≠óÊÆµ Á≠âÁ≠â„ÄÇ</p>
<p>Ëß£Êûê Literals.IDENTIFIER ‰∏é Keyword Ê†∏ÂøÉ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="comment">// Lexer.java</span></div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isIdentifierBegin</span><span class="params">()</span> </span>&#123;</div><div class="line">   <span class="keyword">return</span> isIdentifierBegin(getCurrentChar(<span class="number">0</span>));</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isIdentifierBegin</span><span class="params">(<span class="keyword">final</span> <span class="keyword">char</span> ch)</span> </span>&#123;</div><div class="line">   <span class="keyword">return</span> CharType.isAlphabet(ch) || <span class="string">'`'</span> == ch || <span class="string">'_'</span> == ch || <span class="string">'$'</span> == ch;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Tokenizer.java</span></div><div class="line"><span class="comment">/**</span></div><div class="line">* Êâ´ÊèèÊ†áËØÜÁ¨¶.</div><div class="line">*</div><div class="line">* <span class="doctag">@return</span> Ê†áËØÜÁ¨¶Ê†áËÆ∞</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">public</span> Token <span class="title">scanIdentifier</span><span class="params">()</span> </span>&#123;</div><div class="line">   <span class="comment">// `Â≠óÊÆµ`Ôºå‰æãÂ¶ÇÔºöSELECT `id` FROM t_user ‰∏≠ÁöÑ `id`</span></div><div class="line">   <span class="keyword">if</span> (<span class="string">'`'</span> == charAt(offset)) &#123;</div><div class="line">       <span class="keyword">int</span> length = getLengthUntilTerminatedChar(<span class="string">'`'</span>);</div><div class="line">       <span class="keyword">return</span> <span class="keyword">new</span> Token(Literals.IDENTIFIER, input.substring(offset, offset + length), offset + length);</div><div class="line">   &#125;</div><div class="line">   <span class="keyword">int</span> length = <span class="number">0</span>;</div><div class="line">   <span class="keyword">while</span> (isIdentifierChar(charAt(offset + length))) &#123;</div><div class="line">       length++;</div><div class="line">   &#125;</div><div class="line">   String literals = input.substring(offset, offset + length);</div><div class="line">   <span class="comment">// Â§ÑÁêÜ order / group ‰Ωú‰∏∫Ë°®Âêç</span></div><div class="line">   <span class="keyword">if</span> (isAmbiguousIdentifier(literals)) &#123;</div><div class="line">       <span class="keyword">return</span> <span class="keyword">new</span> Token(processAmbiguousIdentifier(offset + length, literals), literals, offset + length);</div><div class="line">   &#125;</div><div class="line">   <span class="comment">// ‰ªé ËØçÊ≥ïÂÖ≥ÈîÆËØç Êü•ÊâæÊòØÂê¶ÊòØ KeywordÔºåÂ¶ÇÊûúÊòØÔºåÂàôËøîÂõû KeywordÔºåÂê¶ÂàôËøîÂõû Literals.IDENTIFIER</span></div><div class="line">   <span class="keyword">return</span> <span class="keyword">new</span> Token(dictionary.findTokenType(literals, Literals.IDENTIFIER), literals, offset + length);</div><div class="line">&#125;</div><div class="line"><span class="comment">/**</span></div><div class="line">* ËÆ°ÁÆóÂà∞ÁªìÊùüÂ≠óÁ¨¶ÁöÑÈïøÂ∫¶</div><div class="line">*</div><div class="line">* <span class="doctag">@see</span> #hasEscapeChar(char, int) Â§ÑÁêÜÁ±ª‰ºº SELECT a AS `b``c` FROM table„ÄÇÊ≠§Â§ÑËøûÁª≠ÁöÑ "``" ‰∏çÊòØÁªìÂ∞æÔºåÂ¶ÇÊûú‰º†ÈÄíÁöÑÊòØ "`" ‰ºö‰∫ßÁîüËØØÂà§ÔºåÊâÄ‰ª•Âä†‰∫ÜËøô‰∏™Âà§Êñ≠</div><div class="line">* <span class="doctag">@param</span> terminatedChar ÁªìÊùüÂ≠óÁ¨¶</div><div class="line">* <span class="doctag">@return</span> ÈïøÂ∫¶</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">int</span> <span class="title">getLengthUntilTerminatedChar</span><span class="params">(<span class="keyword">final</span> <span class="keyword">char</span> terminatedChar)</span> </span>&#123;</div><div class="line">   <span class="keyword">int</span> length = <span class="number">1</span>;</div><div class="line">   <span class="keyword">while</span> (terminatedChar != charAt(offset + length) || hasEscapeChar(terminatedChar, offset + length)) &#123;</div><div class="line">       <span class="keyword">if</span> (offset + length &gt;= input.length()) &#123;</div><div class="line">           <span class="keyword">throw</span> <span class="keyword">new</span> UnterminatedCharException(terminatedChar);</div><div class="line">       &#125;</div><div class="line">       <span class="keyword">if</span> (hasEscapeChar(terminatedChar, offset + length)) &#123;</div><div class="line">           length++;</div><div class="line">       &#125;</div><div class="line">       length++;</div><div class="line">   &#125;</div><div class="line">   <span class="keyword">return</span> length + <span class="number">1</span>;</div><div class="line">&#125;</div><div class="line"><span class="comment">/**</span></div><div class="line">* ÊòØÂê¶ÊòØ Escape Â≠óÁ¨¶</div><div class="line">*</div><div class="line">* <span class="doctag">@param</span> charIdentifier Â≠óÁ¨¶</div><div class="line">* <span class="doctag">@param</span> offset ‰ΩçÁΩÆ</div><div class="line">* <span class="doctag">@return</span> ÊòØÂê¶</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">hasEscapeChar</span><span class="params">(<span class="keyword">final</span> <span class="keyword">char</span> charIdentifier, <span class="keyword">final</span> <span class="keyword">int</span> offset)</span> </span>&#123;</div><div class="line">   <span class="keyword">return</span> charIdentifier == charAt(offset) &amp;&amp; charIdentifier == charAt(offset + <span class="number">1</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isIdentifierChar</span><span class="params">(<span class="keyword">final</span> <span class="keyword">char</span> ch)</span> </span>&#123;</div><div class="line">   <span class="keyword">return</span> CharType.isAlphabet(ch) || CharType.isDigital(ch) || <span class="string">'_'</span> == ch || <span class="string">'$'</span> == ch || <span class="string">'#'</span> == ch;</div><div class="line">&#125;</div><div class="line"><span class="comment">/**</span></div><div class="line">* ÊòØÂê¶ÊòØÂºïËµ∑Ê≠ß‰πâÁöÑÊ†áËØÜÁ¨¶</div><div class="line">* ‰æãÂ¶Ç "SELECT * FROM group"ÔºåÊ≠§Êó∂ "group" ‰ª£Ë°®ÁöÑÊòØË°®ÂêçÔºåËÄåÈùûËØçÊ≥ïÂÖ≥ÈîÆËØç</div><div class="line">*</div><div class="line">* <span class="doctag">@param</span> literals Ê†áËØÜÁ¨¶</div><div class="line">* <span class="doctag">@return</span> ÊòØÂê¶</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isAmbiguousIdentifier</span><span class="params">(<span class="keyword">final</span> String literals)</span> </span>&#123;</div><div class="line">   <span class="keyword">return</span> DefaultKeyword.ORDER.name().equalsIgnoreCase(literals) || DefaultKeyword.GROUP.name().equalsIgnoreCase(literals);</div><div class="line">&#125;</div><div class="line"><span class="comment">/**</span></div><div class="line">* Ëé∑ÂèñÂºïËµ∑Ê≠ß‰πâÁöÑÊ†áËØÜÁ¨¶ÂØπÂ∫îÁöÑËØçÊ≥ïÊ†áËÆ∞Á±ªÂûã</div><div class="line">*</div><div class="line">* <span class="doctag">@param</span> offset ‰ΩçÁΩÆ</div><div class="line">* <span class="doctag">@param</span> literals Ê†áËØÜÁ¨¶</div><div class="line">* <span class="doctag">@return</span> ËØçÊ≥ïÊ†áËÆ∞Á±ªÂûã</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">private</span> TokenType <span class="title">processAmbiguousIdentifier</span><span class="params">(<span class="keyword">final</span> <span class="keyword">int</span> offset, <span class="keyword">final</span> String literals)</span> </span>&#123;</div><div class="line">   <span class="keyword">int</span> i = <span class="number">0</span>;</div><div class="line">   <span class="keyword">while</span> (CharType.isWhitespace(charAt(offset + i))) &#123;</div><div class="line">       i++;</div><div class="line">   &#125;</div><div class="line">   <span class="keyword">if</span> (DefaultKeyword.BY.name().equalsIgnoreCase(String.valueOf(<span class="keyword">new</span> <span class="keyword">char</span>[] &#123;charAt(offset + i), charAt(offset + i + <span class="number">1</span>)&#125;))) &#123;</div><div class="line">       <span class="keyword">return</span> dictionary.findTokenType(literals);</div><div class="line">   &#125;</div><div class="line">   <span class="keyword">return</span> Literals.IDENTIFIER;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3>3.2.2 Literals.VARIABLE ÂèòÈáè</h3>
<p>ÂèòÈáè„ÄÇ‰æãÂ¶ÇÔºö<code>SELECT @@VERSION</code> „ÄÇ</p>
<p>Ëß£ÊûêÊ†∏ÂøÉ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="comment">// Lexer.java</span></div><div class="line"><span class="comment">/**</span></div><div class="line">* ÊòØÂê¶ÊòØ ÂèòÈáè</div><div class="line">* MySQL ‰∏é SQL Server ÊîØÊåÅ</div><div class="line">* </div><div class="line">* <span class="doctag">@see</span> Tokenizer#scanVariable()</div><div class="line">* <span class="doctag">@return</span> ÊòØÂê¶</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">boolean</span> <span class="title">isVariableBegin</span><span class="params">()</span> </span>&#123;</div><div class="line">   <span class="keyword">return</span> <span class="keyword">false</span>;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Tokenizer.java</span></div><div class="line"><span class="comment">/**</span></div><div class="line">* Êâ´ÊèèÂèòÈáè.</div><div class="line">* Âú® MySQL ÈáåÔºå@‰ª£Ë°®Áî®Êà∑ÂèòÈáèÔºõ@@‰ª£Ë°®Á≥ªÁªüÂèòÈáè„ÄÇ</div><div class="line">* Âú® SQLServer ÈáåÔºåÊúâ @@„ÄÇ</div><div class="line">*</div><div class="line">* <span class="doctag">@return</span> ÂèòÈáèÊ†áËÆ∞</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">public</span> Token <span class="title">scanVariable</span><span class="params">()</span> </span>&#123;</div><div class="line">   <span class="keyword">int</span> length = <span class="number">1</span>;</div><div class="line">   <span class="keyword">if</span> (<span class="string">'@'</span> == charAt(offset + <span class="number">1</span>)) &#123;</div><div class="line">       length++;</div><div class="line">   &#125;</div><div class="line">   <span class="keyword">while</span> (isVariableChar(charAt(offset + length))) &#123;</div><div class="line">       length++;</div><div class="line">   &#125;</div><div class="line">   <span class="keyword">return</span> <span class="keyword">new</span> Token(Literals.VARIABLE, input.substring(offset, offset + length), offset + length);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3>3.2.3 Literals.CHARS Â≠óÁ¨¶‰∏≤</h3>
<p>Â≠óÁ¨¶‰∏≤„ÄÇ‰æãÂ¶ÇÔºö<code>SELECT &quot;123&quot;</code> „ÄÇ</p>
<p>Ëß£ÊûêÊ†∏ÂøÉ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="comment">// Lexer.java</span></div><div class="line"><span class="comment">/**</span></div><div class="line">* ÊòØÂê¶ N\</div><div class="line">* ÁõÆÂâç SQLServer Áã¨ÊúâÔºöÂú® SQL Server ‰∏≠ËôïÁêÜ Unicode Â≠ó‰∏≤Â∏∏Êï∏ÊôÇÔºåÂøÖÈúÄÁÇ∫ÊâÄÊúâÁöÑ Unicode Â≠ó‰∏≤Âä†‰∏äÂâçÁΩÆË©û N</div><div class="line">*</div><div class="line">* <span class="doctag">@see</span> Tokenizer#scanChars()</div><div class="line">* <span class="doctag">@return</span> ÊòØÂê¶</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isNCharBegin</span><span class="params">()</span> </span>&#123;</div><div class="line">   <span class="keyword">return</span> isSupportNChars() &amp;&amp; <span class="string">'N'</span> == getCurrentChar(<span class="number">0</span>) &amp;&amp; <span class="string">'\''</span> == getCurrentChar(<span class="number">1</span>);</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isCharsBegin</span><span class="params">()</span> </span>&#123;</div><div class="line">   <span class="keyword">return</span> <span class="string">'\''</span> == getCurrentChar(<span class="number">0</span>) || <span class="string">'\"'</span> == getCurrentChar(<span class="number">0</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Tokenizer.java</span></div><div class="line"><span class="comment">/**</span></div><div class="line">* Êâ´ÊèèÂ≠óÁ¨¶‰∏≤.</div><div class="line">*</div><div class="line">* <span class="doctag">@return</span> Â≠óÁ¨¶‰∏≤Ê†áËÆ∞</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">public</span> Token <span class="title">scanChars</span><span class="params">()</span> </span>&#123;</div><div class="line">   <span class="keyword">return</span> scanChars(charAt(offset));</div><div class="line">&#125;</div><div class="line"><span class="function"><span class="keyword">private</span> Token <span class="title">scanChars</span><span class="params">(<span class="keyword">final</span> <span class="keyword">char</span> terminatedChar)</span> </span>&#123;</div><div class="line">   <span class="keyword">int</span> length = getLengthUntilTerminatedChar(terminatedChar);</div><div class="line">   <span class="keyword">return</span> <span class="keyword">new</span> Token(Literals.CHARS, input.substring(offset + <span class="number">1</span>, offset + length - <span class="number">1</span>), offset + length);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3>3.2.4 Literals.HEX ÂçÅÂÖ≠ËøõÂà∂</h3>
<p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="comment">// Lexer.java</span></div><div class="line"><span class="comment">/**</span></div><div class="line">* ÊòØÂê¶ÊòØ ÂçÅÂÖ≠ËøõÂà∂</div><div class="line">*</div><div class="line">* <span class="doctag">@see</span> Tokenizer#scanHexDecimal()</div><div class="line">* <span class="doctag">@return</span> ÊòØÂê¶</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isHexDecimalBegin</span><span class="params">()</span> </span>&#123;</div><div class="line">   <span class="keyword">return</span> <span class="string">'0'</span> == getCurrentChar(<span class="number">0</span>) &amp;&amp; <span class="string">'x'</span> == getCurrentChar(<span class="number">1</span>);</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Tokenizer.java</span></div><div class="line"><span class="comment">/**</span></div><div class="line">* Êâ´ÊèèÂçÅÂÖ≠ËøõÂà∂Êï∞.</div><div class="line">*</div><div class="line">* <span class="doctag">@return</span> ÂçÅÂÖ≠ËøõÂà∂Êï∞Ê†áËÆ∞</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">public</span> Token <span class="title">scanHexDecimal</span><span class="params">()</span> </span>&#123;</div><div class="line">   <span class="keyword">int</span> length = HEX_BEGIN_SYMBOL_LENGTH;</div><div class="line">   <span class="comment">// Ë¥üÊï∞</span></div><div class="line">   <span class="keyword">if</span> (<span class="string">'-'</span> == charAt(offset + length)) &#123;</div><div class="line">       length++;</div><div class="line">   &#125;</div><div class="line">   <span class="keyword">while</span> (isHex(charAt(offset + length))) &#123;</div><div class="line">       length++;</div><div class="line">   &#125;</div><div class="line">   <span class="keyword">return</span> <span class="keyword">new</span> Token(Literals.HEX, input.substring(offset, offset + length), offset + length);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h3>3.2.5 Literals.INT Êï¥Êï∞</h3>
<p>Êï¥Êï∞„ÄÇ‰æãÂ¶ÇÔºö<code>SELECT * FROM t_user WHERE id = 1</code>„ÄÇ</p>
<p>Literals.INT ‰∏é Literals.FLOAT ÊòØ‰∏ÄËµ∑Ëß£ÊûêÁöÑÔºåÊàë‰ª¨ÊîæÂú® Literals.FLOAT Â§Ñ‰∏ÄËµ∑ÂàÜÊûê„ÄÇ</p>
<h3>3.2.6 Literals.FLOAT ÊµÆÁÇπÊï∞</h3>
<p>ÊµÆÁÇπÊï∞„ÄÇ‰æãÂ¶ÇÔºö<code>SELECT * FROM t_user WHERE id = 1.0</code>„ÄÇ
ÊµÆÁÇπÊï∞ÂåÖÂê´Âá†ÁßçÔºö&quot;1.0&quot;Ôºå&quot;1.0F&quot;Ôºå&quot;7.823E5&quot;ÔºàÁßëÂ≠¶ËÆ°Êï∞Ê≥ïÔºâ„ÄÇ</p>
<p>Ëß£ÊûêÊ†∏ÂøÉ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="comment">// Lexer.java</span></div><div class="line"><span class="comment">/**</span></div><div class="line">* ÊòØÂê¶ÊòØ Êï∞Â≠ó</div><div class="line">* '-' ÈúÄË¶ÅÁâπÊÆäÂ§ÑÁêÜ„ÄÇ".2" Ë¢´Â§ÑÁêÜÊàêÁúÅÁï•0ÁöÑÂ∞èÊï∞Ôºå"-.2" ‰∏çËÉΩË¢´Â§ÑÁêÜÊàêÁúÅÁï•ÁöÑÂ∞èÊï∞ÔºåÂê¶Âàô‰ºöÂá∫ÈóÆÈ¢ò„ÄÇ</div><div class="line">* ‰æãÂ¶ÇËØ¥Ôºå"SELECT a-.2" Â§ÑÁêÜÁöÑÁªìÊûúÊòØ "SELECT" / "a" / "-" / ".2"</div><div class="line">*</div><div class="line">* <span class="doctag">@return</span> ÊòØÂê¶</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isNumberBegin</span><span class="params">()</span> </span>&#123;</div><div class="line">   <span class="keyword">return</span> CharType.isDigital(getCurrentChar(<span class="number">0</span>)) <span class="comment">// Êï∞Â≠ó</span></div><div class="line">           || (<span class="string">'.'</span> == getCurrentChar(<span class="number">0</span>) &amp;&amp; CharType.isDigital(getCurrentChar(<span class="number">1</span>)) &amp;&amp; !isIdentifierBegin(getCurrentChar(-<span class="number">1</span>)) <span class="comment">// ÊµÆÁÇπÊï∞</span></div><div class="line">           || (<span class="string">'-'</span> == getCurrentChar(<span class="number">0</span>) &amp;&amp; (<span class="string">'.'</span> == getCurrentChar(<span class="number">0</span>) || CharType.isDigital(getCurrentChar(<span class="number">1</span>))))); <span class="comment">// Ë¥üÊï∞</span></div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Tokenizer.java</span></div><div class="line"><span class="comment">/**</span></div><div class="line">* Êâ´ÊèèÊï∞Â≠ó.</div><div class="line">* Ëß£ÊûêÊï∞Â≠óÁöÑÁªìÊûú‰ºöÊúâ‰∏§ÁßçÔºöÊï¥Êï∞ Âíå ÊµÆÁÇπÊï∞.</div><div class="line">*</div><div class="line">* <span class="doctag">@return</span> Êï∞Â≠óÊ†áËÆ∞</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">public</span> Token <span class="title">scanNumber</span><span class="params">()</span> </span>&#123;</div><div class="line">   <span class="keyword">int</span> length = <span class="number">0</span>;</div><div class="line">   <span class="comment">// Ë¥üÊï∞</span></div><div class="line">   <span class="keyword">if</span> (<span class="string">'-'</span> == charAt(offset + length)) &#123;</div><div class="line">       length++;</div><div class="line">   &#125;</div><div class="line">   <span class="comment">// ÊµÆÁÇπÊï∞</span></div><div class="line">   length += getDigitalLength(offset + length);</div><div class="line">   <span class="keyword">boolean</span> isFloat = <span class="keyword">false</span>;</div><div class="line">   <span class="keyword">if</span> (<span class="string">'.'</span> == charAt(offset + length)) &#123;</div><div class="line">       isFloat = <span class="keyword">true</span>;</div><div class="line">       length++;</div><div class="line">       length += getDigitalLength(offset + length);</div><div class="line">   &#125;</div><div class="line">   <span class="comment">// ÁßëÂ≠¶ËÆ°Êï∞Ë°®Á§∫Ôºå‰æãÂ¶ÇÔºöSELECT 7.823E5</span></div><div class="line">   <span class="keyword">if</span> (isScientificNotation(offset + length)) &#123;</div><div class="line">       isFloat = <span class="keyword">true</span>;</div><div class="line">       length++;</div><div class="line">       <span class="keyword">if</span> (<span class="string">'+'</span> == charAt(offset + length) || <span class="string">'-'</span> == charAt(offset + length)) &#123;</div><div class="line">           length++;</div><div class="line">       &#125;</div><div class="line">       length += getDigitalLength(offset + length);</div><div class="line">   &#125;</div><div class="line">   <span class="comment">// ÊµÆÁÇπÊï∞Ôºå‰æãÂ¶ÇÔºöSELECT 1.333F</span></div><div class="line">   <span class="keyword">if</span> (isBinaryNumber(offset + length)) &#123;</div><div class="line">       isFloat = <span class="keyword">true</span>;</div><div class="line">       length++;</div><div class="line">   &#125;</div><div class="line">   <span class="keyword">return</span> <span class="keyword">new</span> Token(isFloat ? Literals.FLOAT : Literals.INT, input.substring(offset, offset + length), offset + length);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>ËøôÈáåË¶ÅÁâπÂà´Ê≥®ÊÑè‰∏ãÔºö<strong>&quot;-&quot;</strong>„ÄÇÂú®Êï∞Â≠óË°®ËææÂÆû‰æãÔºåÂèØ‰ª•Âà§ÂÆö‰∏∫ Ë¥üÂè∑ Âíå ÂáèÂè∑Ôºà‰∏çËÄÉËôëÁßëÂ≠¶ËÆ°Êï∞Ê≥ïÔºâ„ÄÇ</p>
<ul>
<li>&quot;.2&quot;  Ëß£ÊûêÁªìÊûúÊòØ &quot;.2&quot;</li>
<li>&quot;-.2&quot; Ëß£ÊûêÁªìÊûú‰∏çËÉΩÊòØ &quot;-.2&quot;ÔºåËÄåÊòØ &quot;-&quot; Âíå &quot;.2&quot;„ÄÇ</li>
</ul>
<h2>3.3 Symbol ËØçÊ≥ïÁ¨¶Âè∑Ê†áËÆ∞</h2>
<p>ËØçÊ≥ïÁ¨¶Âè∑Ê†áËÆ∞„ÄÇ‰æãÂ¶ÇÔºö&quot;{&quot;, &quot;}&quot;, &quot;&gt;=&quot; Á≠âÁ≠â„ÄÇ</p>
<p>Ëß£ÊûêÊ†∏ÂøÉ‰ª£Á†ÅÂ¶Ç‰∏ãÔºö</p>
<p><figure class="highlight java"><table><tr><td class="code"><pre><div class="line"><span class="comment">// Lexer.java</span></div><div class="line"><span class="comment">/**</span></div><div class="line">* ÊòØÂê¶ÊòØ Á¨¶Âè∑</div><div class="line">*</div><div class="line">* <span class="doctag">@see</span> Tokenizer#scanSymbol()</div><div class="line">* <span class="doctag">@return</span> ÊòØÂê¶</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">private</span> <span class="keyword">boolean</span> <span class="title">isSymbolBegin</span><span class="params">()</span> </span>&#123;</div><div class="line">   <span class="keyword">return</span> CharType.isSymbol(getCurrentChar(<span class="number">0</span>));</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// CharType.java</span></div><div class="line"><span class="comment">/**</span></div><div class="line">* Âà§Êñ≠ÊòØÂê¶‰∏∫Á¨¶Âè∑.</div><div class="line">*</div><div class="line">* <span class="doctag">@param</span> ch ÂæÖÂà§Êñ≠ÁöÑÂ≠óÁ¨¶</div><div class="line">* <span class="doctag">@return</span> ÊòØÂê¶‰∏∫Á¨¶Âè∑</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">isSymbol</span><span class="params">(<span class="keyword">final</span> <span class="keyword">char</span> ch)</span> </span>&#123;</div><div class="line">   <span class="keyword">return</span> <span class="string">'('</span> == ch || <span class="string">')'</span> == ch || <span class="string">'['</span> == ch || <span class="string">']'</span> == ch || <span class="string">'&#123;'</span> == ch || <span class="string">'&#125;'</span> == ch || <span class="string">'+'</span> == ch || <span class="string">'-'</span> == ch || <span class="string">'*'</span> == ch || <span class="string">'/'</span> == ch || <span class="string">'%'</span> == ch || <span class="string">'^'</span> == ch || <span class="string">'='</span> == ch</div><div class="line">           || <span class="string">'&gt;'</span> == ch || <span class="string">'&lt;'</span> == ch || <span class="string">'~'</span> == ch || <span class="string">'!'</span> == ch || <span class="string">'?'</span> == ch || <span class="string">'&amp;'</span> == ch || <span class="string">'|'</span> == ch || <span class="string">'.'</span> == ch || <span class="string">':'</span> == ch || <span class="string">'#'</span> == ch || <span class="string">','</span> == ch || <span class="string">';'</span> == ch;</div><div class="line">&#125;</div><div class="line"></div><div class="line"><span class="comment">// Tokenizer.java</span></div><div class="line"><span class="comment">/**</span></div><div class="line">* Êâ´ÊèèÁ¨¶Âè∑.</div><div class="line">*</div><div class="line">* <span class="doctag">@return</span> Á¨¶Âè∑Ê†áËÆ∞</div><div class="line">*/</div><div class="line"><span class="function"><span class="keyword">public</span> Token <span class="title">scanSymbol</span><span class="params">()</span> </span>&#123;</div><div class="line">   <span class="keyword">int</span> length = <span class="number">0</span>;</div><div class="line">   <span class="keyword">while</span> (CharType.isSymbol(charAt(offset + length))) &#123;</div><div class="line">       length++;</div><div class="line">   &#125;</div><div class="line">   String literals = input.substring(offset, offset + length);</div><div class="line">   <span class="comment">// ÂÄíÂ∫èÈÅçÂéÜÔºåÊü•ËØ¢Á¨¶ÂêàÊù°‰ª∂ÁöÑ Á¨¶Âè∑„ÄÇ‰æãÂ¶Ç literals = ";;"Ôºå‰ºöÊòØÊãÜÂàÜÊàê‰∏§‰∏™ ";"„ÄÇÂ¶ÇÊûúÂü∫‰∫éÊ≠£Â∫èÔºåliterals = "&lt;="Ôºå‰ºöË¢´Ëß£ÊûêÊàê "&lt;" + "="„ÄÇ</span></div><div class="line">   Symbol symbol;</div><div class="line">   <span class="keyword">while</span> (<span class="keyword">null</span> == (symbol = Symbol.literalsOf(literals))) &#123;</div><div class="line">       literals = input.substring(offset, offset + --length);</div><div class="line">   &#125;</div><div class="line">   <span class="keyword">return</span> <span class="keyword">new</span> Token(symbol, literals, offset + length);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2>3.4 Assist ËØçÊ≥ïËæÖÂä©Ê†áËÆ∞</h2>
<p>Assist ËØçÊ≥ïËæÖÂä©Ê†áËÆ∞Ôºå‰∏ÄÂÖ±ÂàÜÊàê 2 ÁßçÔºö</p>
<ul>
<li>END ÔºöÂàÜÊûêÁªìÊùü</li>
<li>ERROR ÔºöÂàÜÊûêÈîôËØØ„ÄÇ</li>
</ul>
<h1>4. ÂΩ©Ëõã</h1>
<p>ËÄÅÈìÅÔºåÊòØ‰∏çÊòØÊØîÊÉ≥Ë±°‰∏≠ÁÆÄÂçï‰∏Ä‰∫õÔºüÔºÅÁªßÁª≠Âä†Ê≤πÂÜô Parser Áõ∏ÂÖ≥ÁöÑÊñáÁ´†ÔºÅÊù•‰∏ÄÊ≥¢ÂæÆ‰ø°ÂÖ¨‰ºóÂè∑ÂÖ≥Ê≥®Âêß„ÄÇ</p>
<hr>
<p><strong>Sharding-JDBC Ê≠£Âú®Êî∂ÈõÜ‰ΩøÁî®ÂÖ¨Âè∏ÂêçÂçïÔºö<a href="https://github.com/dangdangdotcom/sharding-jdbc/issues/234" target="_blank" rel="external">‰º†ÈÄÅÈó®</a>„ÄÇüôÇ ‰Ω†ÁöÑÁôªËÆ∞Ôºå‰ºöËÆ©Êõ¥Â§ö‰∫∫ÂèÇ‰∏éÂíå‰ΩøÁî® Sharding-JDBC„ÄÇSharding-JDBC ‰πü‰ºöÂõ†Ê≠§ÔºåËÉΩÂ§üË¶ÜÁõñÊõ¥ÂπøÁöÑÂú∫ÊôØ„ÄÇÁôªËÆ∞ÂêßÔºåÂ∞ëÂπ¥ÔºÅ</strong></p>
<hr>
<p><strong>ÊàëÂàõÂª∫‰∫Ü‰∏Ä‰∏™ÂæÆ‰ø°Áæ§„ÄêÊ∫êÁ†ÅÂúà„ÄëÔºåÂ∏åÊúõÂíåÂ§ßÂÆ∂ÂàÜ‰∫´‰∫§ÊµÅËØªÊ∫êÁ†ÅÁöÑÁªèÈ™å„ÄÇ<br>
ËØªÊ∫êÁ†ÅÂÖàÈöæÂêéÊòìÔºåÊéåÊè°ÊñπÊ≥ïÂêéÔºåÂèØ‰ª•ÂÅöÊõ¥ÊúâÊ∑±Â∫¶ÁöÑÂ≠¶‰π†„ÄÇ<br>
ËÄå‰∏îÊéåÊè°ÊñπÊ≥ïÂπ∂‰∏çÈöæÂô¢„ÄÇ<br>
Âä†Áæ§ÊñπÂºèÔºöÂæÆ‰ø°ÂÖ¨‰ºóÂè∑ÂèëÈÄÅÂÖ≥ÈîÆÂ≠ó„Äêqun„Äë„ÄÇ</strong></p>

  </div>
</article>



    </div>
    
      <div id="footer-post-container">
  <div id="footer-post">

    <div id="nav-footer" style="display: none">
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/YunaiV">GitHub</a></li>
        
      </ul>
    </div>

    <div id="toc-footer" style="display: none">
      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">1.</span> <span class="toc-text">1. Ê¶ÇËø∞</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">2.</span> <span class="toc-text">2. Lexer ËØçÊ≥ïËß£ÊûêÂô®</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">3.</span> <span class="toc-text">3. Token ËØçÊ≥ïÊ†áËÆ∞</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#undefined"><span class="toc-number">3.1.</span> <span class="toc-text">3.1 DefaultKeyword ËØçÊ≥ïÂÖ≥ÈîÆËØç</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#undefined"><span class="toc-number">3.2.</span> <span class="toc-text">3.2 Literals ËØçÊ≥ïÂ≠óÈù¢ÈáèÊ†áËÆ∞</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">3.2.1.</span> <span class="toc-text">3.2.1 Literals.IDENTIFIER ËØçÊ≥ïÂÖ≥ÈîÆËØç</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">3.2.2.</span> <span class="toc-text">3.2.2 Literals.VARIABLE ÂèòÈáè</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">3.2.3.</span> <span class="toc-text">3.2.3 Literals.CHARS Â≠óÁ¨¶‰∏≤</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">3.2.4.</span> <span class="toc-text">3.2.4 Literals.HEX ÂçÅÂÖ≠ËøõÂà∂</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">3.2.5.</span> <span class="toc-text">3.2.5 Literals.INT Êï¥Êï∞</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">3.2.6.</span> <span class="toc-text">3.2.6 Literals.FLOAT ÊµÆÁÇπÊï∞</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#undefined"><span class="toc-number">3.3.</span> <span class="toc-text">3.3 Symbol ËØçÊ≥ïÁ¨¶Âè∑Ê†áËÆ∞</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#undefined"><span class="toc-number">3.4.</span> <span class="toc-text">3.4 Assist ËØçÊ≥ïËæÖÂä©Ê†áËÆ∞</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#undefined"><span class="toc-number">4.</span> <span class="toc-text">4. ÂΩ©Ëõã</span></a></li></ol>
    </div>

    <div id="share-footer" style="display: none">
      <ul>
  <li><a class="icon" href="http://www.facebook.com/sharer.php?u=http://www.yunai.me/Sharding-JDBC/sql-parse-1/" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-facebook fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://twitter.com/share?url=http://www.yunai.me/Sharding-JDBC/sql-parse-1/&text=Sharding-JDBC Ê∫êÁ†ÅÂàÜÊûê ‚Äî‚Äî SQL Ëß£ÊûêÔºà‰∏ÄÔºâ‰πãËØ≠Ê≥ïËß£Êûê" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-twitter fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.linkedin.com/shareArticle?url=http://www.yunai.me/Sharding-JDBC/sql-parse-1/&title=Sharding-JDBC Ê∫êÁ†ÅÂàÜÊûê ‚Äî‚Äî SQL Ëß£ÊûêÔºà‰∏ÄÔºâ‰πãËØ≠Ê≥ïËß£Êûê" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-linkedin fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://pinterest.com/pin/create/bookmarklet/?url=http://www.yunai.me/Sharding-JDBC/sql-parse-1/&is_video=false&description=Sharding-JDBC Ê∫êÁ†ÅÂàÜÊûê ‚Äî‚Äî SQL Ëß£ÊûêÔºà‰∏ÄÔºâ‰πãËØ≠Ê≥ïËß£Êûê" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-pinterest fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="mailto:?subject=Sharding-JDBC Ê∫êÁ†ÅÂàÜÊûê ‚Äî‚Äî SQL Ëß£ÊûêÔºà‰∏ÄÔºâ‰πãËØ≠Ê≥ïËß£Êûê&body=Check out this article: http://www.yunai.me/Sharding-JDBC/sql-parse-1/"><i class="fa fa-envelope fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="https://getpocket.com/save?url=http://www.yunai.me/Sharding-JDBC/sql-parse-1/&title=Sharding-JDBC Ê∫êÁ†ÅÂàÜÊûê ‚Äî‚Äî SQL Ëß£ÊûêÔºà‰∏ÄÔºâ‰πãËØ≠Ê≥ïËß£Êûê" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-get-pocket fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://reddit.com/submit?url=http://www.yunai.me/Sharding-JDBC/sql-parse-1/&title=Sharding-JDBC Ê∫êÁ†ÅÂàÜÊûê ‚Äî‚Äî SQL Ëß£ÊûêÔºà‰∏ÄÔºâ‰πãËØ≠Ê≥ïËß£Êûê" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-reddit fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.stumbleupon.com/submit?url=http://www.yunai.me/Sharding-JDBC/sql-parse-1/&title=Sharding-JDBC Ê∫êÁ†ÅÂàÜÊûê ‚Äî‚Äî SQL Ëß£ÊûêÔºà‰∏ÄÔºâ‰πãËØ≠Ê≥ïËß£Êûê" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-stumbleupon fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://digg.com/submit?url=http://www.yunai.me/Sharding-JDBC/sql-parse-1/&title=Sharding-JDBC Ê∫êÁ†ÅÂàÜÊûê ‚Äî‚Äî SQL Ëß£ÊûêÔºà‰∏ÄÔºâ‰πãËØ≠Ê≥ïËß£Êûê" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-digg fa-lg" aria-hidden="true"></i></a></li>
  <li><a class="icon" href="http://www.tumblr.com/share/link?url=http://www.yunai.me/Sharding-JDBC/sql-parse-1/&name=Sharding-JDBC Ê∫êÁ†ÅÂàÜÊûê ‚Äî‚Äî SQL Ëß£ÊûêÔºà‰∏ÄÔºâ‰πãËØ≠Ê≥ïËß£Êûê&description=" rel="external nofollow noopener noreferrer" target="_blank"><i class="fa fa-tumblr fa-lg" aria-hidden="true"></i></a></li>
</ul>

    </div>

    <div id="actions-footer">
      <ul>
        <li id="toc"><a class="icon" href="#" onclick="$(" #toc-footer").toggle();return="" false;"=""><i class="fa fa-list fa-lg" aria-hidden="true"></i> TOC</a></li>
        <li id="share"><a class="icon" href="#" onclick="$(" #share-footer").toggle();return="" false;"=""><i class="fa fa-share-alt fa-lg" aria-hidden="true"></i> Share</a></li>
        <li id="top" style="display:none"><a class="icon" href="#" onclick="$('html, body').animate({ scrollTop: 0 }, 'fast');"><i class="fa fa-chevron-up fa-lg" aria-hidden="true"></i> Top</a></li>
        <li id="menu"><a class="icon" href="#" onclick="$(" #nav-footer").toggle();return="" false;"=""><i class="fa fa-bars fa-lg" aria-hidden="true"></i> Menu</a></li>
      </ul>
    </div>

  </div>
</div>

    
    <footer id="footer">
  <div class="footer-left">
    Copyright &copy; 2017 ÁéãÊñáÊñå
  </div>

  <div class="footer-right">
    <nav>
      <ul>
         
          <li><a href="/">Home</a></li>
         
          <li><a href="/archives/">Writing</a></li>
         
          <li><a href="http://github.com/YunaiV">GitHub</a></li>
        
          <li>
              Hosted by <a href="https://pages.coding.me" style="font-weight: bold" rel="external nofollow noopener noreferrer" target="_blank">Coding Pages</a>
          </li>
      </ul>
    </nav>
  </div>
</footer>

</body>
</html>
<!-- styles -->
<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css">
<link rel="stylesheet" href="/lib/meslo-LG/styles.css">
<link rel="stylesheet" href="/lib/justified-gallery/justifiedGallery.min.css">


<!-- jquery -->
<script src="/lib/jquery/jquery.min.js"></script>
<script src="/lib/justified-gallery/jquery.justifiedGallery.min.js"></script>
<script src="/js/main.js"></script>
<!-- Google Analytics -->

<!-- Disqus Comments -->


<!--page counter part-->
<script>
    function addCount(Counter) {
        // TODO ÂæÖ‰ºòÂåñÔºöËøáÊª§ Áà¨Ëô´
        url = $('#actions .icon').attr('href').trim(); // ÊñáÁ´†url
//        alert(url);
        title = $('.posttitle').text().trim(); // ÊñáÁ´†Ê†áÈ¢ò
        var query = new AV.Query(Counter);
        //use url as unique idnetfication
        query.equalTo("url", url);
        query.find({
            success: function (results) {
                if (results.length > 0) {
                    var counter = results[0];
                    counter.fetchWhenSave(true); //get recent result
                    counter.increment("time");
                    counter.save();
                    // ÊèíÂÖ•Ê¨°Êï∞
                    $('.postdate').append('&nbsp;' + (counter.get('time') + 1) + '  Views');
                } else {
                    var newcounter = new Counter();
                    newcounter.set("title", title);
                    newcounter.set("url", url);
                    newcounter.set("time", 1);
                    newcounter.save(null, {
                        success: function (newcounter) {
                            // ÊèíÂÖ•Ê¨°Êï∞
                            $('.postdate').append('&nbsp;1  Views');
                        },
                        error: function (newcounter, error) {
                        }
                    });
                }
            },
            error: function (error) {
            }
        });
    }

    function getCookie(c_name) {
        if (document.cookie.length > 0) {
            c_start = document.cookie.indexOf(c_name + "=")
            if (c_start != -1) {
                c_start = c_start + c_name.length + 1
                c_end = document.cookie.indexOf(";", c_start)
                if (c_end == -1) c_end = document.cookie.length
                return unescape(document.cookie.substring(c_start, c_end))
            }
        }
        return ""
    }

    function setCookie(c_name, value, expiredays) {
        var exdate = new Date()
        exdate.setDate(exdate.getDate() + expiredays)
        document.cookie = c_name + "=" + escape(value) +
            ((expiredays == null) ? "" : ";expires=" + exdate.toGMTString())
    }

    function addVisitLog() {
        // Ëé∑Âèñuid
        var visitorId = getCookie('blog_visitor_id');
        if (visitorId.length != 36) {
            visitorId = uuid();
            setCookie('blog_visitor_id', visitorId);
        }
        // ip ÊµèËßàÂô®Êó†Ê≥ïËé∑Âèñ
        // time ÊúçÂä°Á´ØÂ∑≤ÁªèËÆ∞ÂΩï
        var url = location.href;
        var ua = navigator.userAgent;
        var referer = document.referrer;
        var Log = AV.Object.extend("VisitLog");
        var log = new Log();
        log.set('url', url);
        log.set('ua', ua);
        log.set('referer', referer);
        log.set('visitorId', visitorId);
        log.save();
    }

    function uuid() {
        var s = [];
        var hexDigits = "0123456789abcdef";
        for (var i = 0; i < 36; i++) {
            s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1);
        }
        s[14] = "4";  // bits 12-15 of the time_hi_and_version field to 0010
        s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1);  // bits 6-7 of the clock_seq_hi_and_reserved to 01
        s[8] = s[13] = s[18] = s[23] = "-";

        var uuid = s.join("");
        return uuid;
    }

    // TODO ÂæÖ‰ºòÂåñÔºöÊ≠§Â§ÑÊÄßËÉΩËæÉÂ∑ÆÔºåÂèØËÉΩ
    function countVisitLog() {
        var Log = AV.Object.extend("VisitLog");
        var query = new AV.Query(Log);
        query.count({
            success: function (results) {
                $('.footer-left').append('&nbsp;' + results + '  Views');
            },
            error: function (error) {
            }
        });
    }

    $(function () {
        // Âà§Êñ≠ÊòØÂê¶Âú®ÊñáÁ´†È°µ
        setTimeout(function () {
            if ($('.posttitle').length == 1) {
                var Counter = AV.Object.extend("Counter");
                // Â¢ûÂä†ÊñáÁ´†ËÆøÈóÆÊ¨°Êï∞
                addCount(Counter);
            }
            // ËÆ∞ÂΩïËÆøÈóÆÊó•Âøó
            addVisitLog();
            // ËÆ°ÁÆóÂ§öÂ∞ë‰∫∫ËÆøÈóÆ
            countVisitLog();
        }, 1000);
    });
</script>
