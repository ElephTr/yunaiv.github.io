title: MyCAT 源码解析 —— 分片结果聚合
date: 2017-06-13
tags:
categories: MyCAT
permalink: MyCAT/sharding-result-aggregation

---

# 1. 概述

相信很多同学都看过 MySQL 各种优化的文章，里面 99% 都会提到：单表数据量大了，需要进行分片。拆分之后，业务上必然面临的场景：跨分片的数据聚合。今天我们就一起来瞅瞅 MyCAT 是如何实现**分片结果聚合**。

跨分片查询大体流程如下：

![flow](http://www.yunai.me/images/MyCAT/2017_06_13/flow.png)

和 [《【单库单表】查询》](http://www.yunai.me/Mycat/single-db-single-table-select/) 不同的两个过程：

* 【2】多分片执行 SQL
* 【4】聚合多分片结果

下面，我们逐条来讲解这两个过程。

# 2. 多分片执行 SQL

![execute_sql](http://www.yunai.me/images/MyCAT/2017_06_13/execute_sql.png)



# 3. 聚合多分片结果

